{% extends "base.html" %}

{% block title %}Sign Up - Infinite Labs{% endblock %}

{% block content %}
<div class="auth-container">
    <div class="auth-box signup-enhanced">
        <div class="auth-icon">
            <img src="{{ url_for('static', filename='infinitelab2.png') }}" alt="Infinite Labs Logo" class="auth-logo">
        </div>
        
        <div class="auth-header">
            <h2>Create Account</h2>
            <p>Join Infinite Labs and unlock premium peptide science</p>
        </div>

        {% with messages = get_flashed_messages(with_categories=true) %}
            {% if messages %}
                {% for category, message in messages %}
                    <div class="alert alert-{{ category }}">
                        {{ message }}
                    </div>
                {% endfor %}
            {% endif %}
        {% endwith %}

        <form method="POST" action="{{ url_for('signup') }}" class="auth-form" id="signupForm">
            <div class="form-row">
                <div class="form-group">
                    <label for="name">
                        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                            <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                            <circle cx="12" cy="7" r="4" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                        Full Name
                    </label>
                    <input type="text" id="name" name="name" required placeholder="John Doe" autocomplete="name">
                </div>

                <div class="form-group">
                    <label for="phone">
                        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                            <path d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                        Phone Number (Optional)
                    </label>
                    <input type="tel" id="phone" name="phone" placeholder="+1 (555) 123-4567" autocomplete="tel" pattern="[0-9+\-\s()]*">
                </div>
            </div>

            <div class="form-group">
                <label for="email">
                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                        <path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        <polyline points="22,6 12,13 2,6" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                    Email Address
                </label>
                <input type="email" id="email" name="email" required placeholder="your.email@example.com" autocomplete="email">
            </div>

            <div class="form-row">
                <div class="form-group">
                    <label for="password">
                        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                            <rect x="3" y="11" width="18" height="11" rx="2" ry="2" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                            <path d="M7 11V7a5 5 0 0 1 10 0v4" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                        Password
                    </label>
                    <input type="password" id="password" name="password" required placeholder="Min. 8 characters" minlength="8" autocomplete="new-password">
                    <div class="password-strength" id="passwordStrength"></div>
                </div>

                <div class="form-group">
                    <label for="confirm_password">
                        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                            <rect x="3" y="11" width="18" height="11" rx="2" ry="2" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                            <path d="M7 11V7a5 5 0 0 1 10 0v4" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                        Confirm Password
                    </label>
                    <input type="password" id="confirm_password" name="confirm_password" required placeholder="Re-enter password" minlength="8" autocomplete="new-password">
                </div>
            </div>

            <div class="password-requirements">
                <p>Password must contain:</p>
                <ul>
                    <li id="length">✓ At least 8 characters</li>
                    <li id="letter">✓ At least one letter</li>
                    <li id="number">✓ At least one number</li>
                </ul>
            </div>

            <button type="submit" class="btn-primary btn-full btn-signup-submit">
                <span>Create Account</span>
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                    <path d="M5 12h14M12 5l7 7-7 7" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
            </button>
        </form>

        <div class="auth-footer">
            <p>Already have an account? <a href="{{ url_for('login') }}">Login here</a></p>
        </div>
    </div>
</div>

<script>
// Password strength indicator
const passwordInput = document.getElementById('password');
const strengthIndicator = document.getElementById('passwordStrength');
const lengthCheck = document.getElementById('length');
const letterCheck = document.getElementById('letter');
const numberCheck = document.getElementById('number');

passwordInput.addEventListener('input', function() {
    const password = this.value;
    let strength = 0;
    
    if (password.length >= 8) {
        strength++;
        lengthCheck.style.color = '#10b981';
    } else {
        lengthCheck.style.color = '#9ca3af';
    }
    
    if (/[a-zA-Z]/.test(password)) {
        strength++;
        letterCheck.style.color = '#10b981';
    } else {
        letterCheck.style.color = '#9ca3af';
    }
    
    if (/[0-9]/.test(password)) {
        strength++;
        numberCheck.style.color = '#10b981';
    } else {
        numberCheck.style.color = '#9ca3af';
    }
    
    if (strength === 0) {
        strengthIndicator.style.display = 'none';
    } else {
        strengthIndicator.style.display = 'block';
        if (strength === 1) {
            strengthIndicator.textContent = 'Weak';
            strengthIndicator.className = 'password-strength weak';
        } else if (strength === 2) {
            strengthIndicator.textContent = 'Medium';
            strengthIndicator.className = 'password-strength medium';
        } else {
            strengthIndicator.textContent = 'Strong';
            strengthIndicator.className = 'password-strength strong';
        }
    }
});
</script>
{% endblock %}
